// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
  output   = "./generated/client"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}


enum NotificationType {
  followRequest
  follow
  storyReacted
  DmMessage
  ShopPromotion
  postReacted
  postCommented
  commentReacted
  commentCommented
  postMention
  commentMention
  info
  warning
}



model Notification {
  id              String   @id @default(auto()) @map("_id") @db.ObjectId
  userId          String   @db.ObjectId
  contentId       String?  @db.ObjectId
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
  type            NotificationType
  authorProfileId String?  @db.ObjectId
  authorId        String
  content         String @default("")
}

enum NotificationSettingsEnum {
  on
  off
  iFollow
}

model UserNotificationSettings {
  id               String                   @id @default(auto()) @map("_id") @db.ObjectId
  userId           String                   @unique @db.ObjectId
  createdAt        DateTime                 @default(now())
  updatedAt        DateTime                 @updatedAt
  postReaction     NotificationSettingsEnum @default(on)
  productPosts     NotificationSettingsEnum @default(on)
  servicePosts     NotificationSettingsEnum @default(on)
  affilaitionPosts NotificationSettingsEnum @default(on)
  actionPosts      NotificationSettingsEnum @default(on)
  postComment      NotificationSettingsEnum @default(on)
  commentLike      NotificationSettingsEnum @default(on)
  mentions         NotificationSettingsEnum @default(on)
  nearShopPromotions Boolean                @default(false)
  silentedContent  SilentContent[]

}

model SilentContent {
  id         String                   @id @default(auto()) @map("_id") @db.ObjectId
  contentId  String                   @db.ObjectId
  silentedBy UserNotificationSettings @relation(fields: [userId], references: [userId])
  userId     String
}
